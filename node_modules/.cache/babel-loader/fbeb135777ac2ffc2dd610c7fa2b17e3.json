{"ast":null,"code":"import _regeneratorRuntime from\"/Users/princekumar/Downloads/react1/c3/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/princekumar/Downloads/react1/c3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/princekumar/Downloads/react1/c3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useParams}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Movie=function Movie(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),allBookedMovie=_React$useState2[0],setAllBookedMovie=_React$useState2[1];var _React$useState3=React.useState({}),_React$useState4=_slicedToArray(_React$useState3,2),currentMovieData=_React$useState4[0],setCurrentMovieData=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),booked=_React$useState6[0],setBooked=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),name=_React$useState8[0],setName=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),seat=_React$useState10[0],setSeat=_React$useState10[1];var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var isBooked=function isBooked(allBookedMovie,id){setBooked(false);allBookedMovie.map(function(e){if(e.movie_id==id){setBooked(true);}});};// const fetchAllBookedMovie=async()=>{\n//     let res=await fetch(`http://localhost:8080/moviesBooked`);\n//     let data=await res.json();\n//     setAllBookedMovie(data)\n// }\nvar handler=function handler(){var payload={movie_id:id,name:name,seat:seat};fetch('http://localhost:8080/moviesBooked',{method:\"POST\",body:JSON.stringify(payload),headers:{'Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(res){return setBooked(true);}).catch(function(error){return console.log(error);});};var fetchCurrentAndAll=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var res,data,ress,dataa;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:8080/movies/\".concat(id));case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;setCurrentMovieData(data);_context.next=9;return fetch(\"http://localhost:8080/moviesBooked\");case 9:ress=_context.sent;_context.next=12;return ress.json();case 12:dataa=_context.sent;setAllBookedMovie(dataa);case 14:case\"end\":return _context.stop();}}},_callee);}));return function fetchCurrentAndAll(_x){return _ref.apply(this,arguments);};}();React.useEffect(function(){fetchCurrentAndAll(id);isBooked(allBookedMovie,id);},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:currentMovieData.title}),/*#__PURE__*/_jsx(\"img\",{style:{width:'300px'},src:currentMovieData.poster_path}),/*#__PURE__*/_jsx(\"p\",{style:{width:'700px',textAlign:'center',marginLeft:'20%',color:'green'},children:currentMovieData.overview}),booked?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate('/bookings');},children:\"Show Bookings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate('/');},children:\"Home Page\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Seat\",value:seat,onChange:function onChange(e){return setSeat(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handler,children:\"Book Seat\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate('/');},children:\"Home Page\"})]})]});};","map":{"version":3,"names":["React","useParams","useNavigate","Movie","useState","allBookedMovie","setAllBookedMovie","currentMovieData","setCurrentMovieData","booked","setBooked","name","setName","seat","setSeat","id","navigate","isBooked","map","e","movie_id","handler","payload","fetch","method","body","JSON","stringify","headers","then","res","json","catch","error","console","log","fetchCurrentAndAll","data","ress","dataa","useEffect","title","width","poster_path","textAlign","marginLeft","color","overview","target","value"],"sources":["/Users/princekumar/Downloads/react1/c3/src/Components/Movie.jsx"],"sourcesContent":["import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport const Movie = () => {\n    const [allBookedMovie, setAllBookedMovie] = React.useState([]);\n    const [currentMovieData, setCurrentMovieData] = React.useState({})\n    const [booked, setBooked] = React.useState(false)\n    const [name, setName] = React.useState(\"\");\n    const [seat, setSeat] = React.useState(\"\");\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const isBooked = (allBookedMovie, id) => {\n        setBooked(false)\n        allBookedMovie.map((e) => {\n            if (e.movie_id == id) {\n                setBooked(true)\n            }\n        })\n    }\n    // const fetchAllBookedMovie=async()=>{\n    //     let res=await fetch(`http://localhost:8080/moviesBooked`);\n    //     let data=await res.json();\n    //     setAllBookedMovie(data)\n    // }\n    const handler =()=>{\n        const payload={\n            movie_id:id,name:name,seat:seat\n        }\n        fetch('http://localhost:8080/moviesBooked',{\n            method:\"POST\",\n            body:JSON.stringify(payload),\n            headers:{\n                'Content-Type': 'application/json'\n            }\n        })\n        .then((res)=>res.json())\n        .then((res)=>setBooked(true))\n        .catch((error)=>console.log(error))\n    }\n    const fetchCurrentAndAll = async (id) => {\n        let res = await fetch(`http://localhost:8080/movies/${id}`);\n        let data = await res.json();\n        setCurrentMovieData(data)\n        let ress = await fetch(`http://localhost:8080/moviesBooked`);\n        let dataa = await ress.json();\n        setAllBookedMovie(dataa)\n\n    }\n    React.useEffect(() => { fetchCurrentAndAll(id); isBooked(allBookedMovie, id) }, [])\n\n    return (\n        <div>\n            <h1>{currentMovieData.title}</h1>\n            <img style={{width:'300px'}} src={currentMovieData.poster_path} />\n            <p style={{width:'700px',textAlign:'center',marginLeft:'20%',color:'green'}}>{currentMovieData.overview}</p>\n            {/* <p>{'la'}{}</p> */}\n\n            {booked?<><button onClick={()=>navigate('/bookings')}>Show Bookings</button><button onClick={() => navigate('/')}>Home Page</button></>:\n            <><input type='text' placeholder='Name' value={name} onChange={(e) => setName(e.target.value)} />\n            <input type='text' placeholder=\"Seat\" value={seat} onChange={(e) => setSeat(e.target.value)} />\n            <br></br>\n            <button onClick={handler}>Book Seat</button>\n            <button onClick={() => navigate('/')}>Home Page</button></>\n            }\n            \n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}