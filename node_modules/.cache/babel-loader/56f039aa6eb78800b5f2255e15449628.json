{"ast":null,"code":"import _regeneratorRuntime from\"/Users/princekumar/Downloads/react1/c3/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/princekumar/Downloads/react1/c3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/princekumar/Downloads/react1/c3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Bookings=function Bookings(){var _useSelector=useSelector(function(store){return store;}),isAuth=_useSelector.isAuth;var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),bookings=_React$useState2[0],setBookings=_React$useState2[1];var navigate=useNavigate();var bookingDone=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:8080/moviesBooked\");case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;setBookings(data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function bookingDone(){return _ref.apply(this,arguments);};}();var cancelBooking=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:8080/moviesBooked/\".concat(id),{method:\"DELETE\"});case 3:bookingDone();_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function cancelBooking(_x){return _ref2.apply(this,arguments);};}();React.useEffect(function(){if(!isAuth){navigate('/login');}else{bookingDone();}},[]);return/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:'35%',marginTop:'5%'},children:bookings===null||bookings===void 0?void 0:bookings.map(function(movie,e){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{style:{border:\"1px solid blue\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Movie Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Seat Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cancel Booking\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{border:\"1px solid green\"},children:movie.movie_id}),/*#__PURE__*/_jsx(\"td\",{style:{border:\"1px solid green\"},children:movie.name}),/*#__PURE__*/_jsx(\"td\",{style:{border:\"1px solid green\"},children:movie.seat}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){cancelBooking(movie.id);},children:\"Cancel Booking\"})})]})})]})},e);})});};","map":{"version":3,"names":["React","useSelector","useNavigate","Bookings","store","isAuth","useState","bookings","setBookings","navigate","bookingDone","fetch","res","json","data","cancelBooking","id","method","console","log","useEffect","marginLeft","marginTop","map","movie","e","border","movie_id","name","seat"],"sources":["/Users/princekumar/Downloads/react1/c3/src/Components/Bookings.jsx"],"sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\nimport {useNavigate} from 'react-router-dom';\n\nexport const Bookings=()=> {\n    const {isAuth} = useSelector(store => store);\n    const [bookings, setBookings] = React.useState([]);\n    \n    const navigate = useNavigate();\n    const bookingDone = async() => {\n        \n            let res =await fetch (`http://localhost:8080/moviesBooked`);\n            let data = await res.json();\n            setBookings(data);\n        \n    }\n\n    const cancelBooking = async(id) => {\n        try {\n            await fetch(`http://localhost:8080/moviesBooked/${id}`, {\n                method: \"DELETE\",\n                });\n            bookingDone();\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    React.useEffect(()=>{\n        if(!isAuth){\n            navigate('/login');\n        }else{\n            bookingDone()\n        }\n        \n    },[])\n    \n  return (\n    <div style={{marginLeft:'35%',marginTop:'5%'}}>\n        {\n            bookings?.map((movie, e)=>{\n                return <div key={e}>\n                    <table style={{border:\"1px solid blue\"}}>\n                        <thead >\n                            <tr >\n                                <th>Movie Id</th>\n                                <th>Name</th>\n                                <th>Seat Number</th>\n                                <th>Cancel Booking</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr>\n                                <td style={{border:\"1px solid green\"}}>{movie.movie_id}</td>\n                                <td style={{border:\"1px solid green\"}}>{movie.name}</td>\n                                <td style={{border:\"1px solid green\"}}>{movie.seat}</td>\n                                <td ><button onClick={()=>{cancelBooking(movie.id)}}>Cancel Booking</button></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            })\n        }\n    </div>\n  )\n}"],"mappings":"oYAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAAQC,WAAR,KAA0B,kBAA1B,C,wFAEA,MAAO,IAAMC,SAAQ,CAAC,QAATA,SAAS,EAAK,CACvB,iBAAiBF,WAAW,CAAC,SAAAG,KAAK,QAAIA,MAAJ,EAAN,CAA5B,CAAOC,MAAP,cAAOA,MAAP,CACA,oBAAgCL,KAAK,CAACM,QAAN,CAAe,EAAf,CAAhC,oDAAOC,QAAP,qBAAiBC,WAAjB,qBAEA,GAAMC,SAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,YAAW,4FAAG,wKAEGC,MAAK,sCAFR,QAERC,GAFQ,qCAGKA,IAAG,CAACC,IAAJ,EAHL,QAGRC,IAHQ,eAIZN,WAAW,CAACM,IAAD,CAAX,CAJY,sDAAH,kBAAXJ,YAAW,0CAAjB,CAQA,GAAMK,cAAa,6FAAG,kBAAMC,EAAN,gKAERL,MAAK,8CAAuCK,EAAvC,EAA6C,CACpDC,MAAM,CAAE,QAD4C,CAA7C,CAFG,QAKdP,WAAW,GALG,kFAOdQ,OAAO,CAACC,GAAR,eAPc,qEAAH,kBAAbJ,cAAa,6CAAnB,CAWAf,KAAK,CAACoB,SAAN,CAAgB,UAAI,CAChB,GAAG,CAACf,MAAJ,CAAW,CACPI,QAAQ,CAAC,QAAD,CAAR,CACH,CAFD,IAEK,CACDC,WAAW,GACd,CAEJ,CAPD,CAOE,EAPF,EASF,mBACE,YAAK,KAAK,CAAE,CAACW,UAAU,CAAC,KAAZ,CAAkBC,SAAS,CAAC,IAA5B,CAAZ,UAEQf,QAFR,SAEQA,QAFR,iBAEQA,QAAQ,CAAEgB,GAAV,CAAc,SAACC,KAAD,CAAQC,CAAR,CAAY,CACtB,mBAAO,kCACH,eAAO,KAAK,CAAE,CAACC,MAAM,CAAC,gBAAR,CAAd,wBACI,oCACI,mCACI,gCADJ,cAEI,4BAFJ,cAGI,mCAHJ,cAII,sCAJJ,GADJ,EADJ,cASI,oCACI,mCACI,WAAI,KAAK,CAAE,CAACA,MAAM,CAAC,iBAAR,CAAX,UAAwCF,KAAK,CAACG,QAA9C,EADJ,cAEI,WAAI,KAAK,CAAE,CAACD,MAAM,CAAC,iBAAR,CAAX,UAAwCF,KAAK,CAACI,IAA9C,EAFJ,cAGI,WAAI,KAAK,CAAE,CAACF,MAAM,CAAC,iBAAR,CAAX,UAAwCF,KAAK,CAACK,IAA9C,EAHJ,cAII,iCAAK,eAAQ,OAAO,CAAE,kBAAI,CAACd,aAAa,CAACS,KAAK,CAACR,EAAP,CAAb,CAAwB,CAA9C,4BAAL,EAJJ,GADJ,EATJ,GADG,EAAUS,CAAV,CAAP,CAoBH,CArBD,CAFR,EADF,CA4BD,CA7DM"},"metadata":{},"sourceType":"module"}